<div class="flex">
  <!-- {{ currentConditionsByZip() | json }}
  {{ currentLocations() | json }} -->
  <div class="tab-container">
    <ng-container
      *ngFor="
        let location of currentConditionsByZip();
        let i = index;
        trackBy: locationZip
      "
    >
      <app-tab
        [id]="i"
        [title]="location.data.name"
        [zip]="location.zip"
        (selectTab)="changeWeatherTab($event)"
        (removeTab)="deleteWeatherTab($event)"
      ></app-tab>
    </ng-container>
  </div>
  <ng-template
    [ngIf]="currentConditionsByZip() && currentConditionsByZip().length === 0"
    [ngIfElse]="card"
  >
    No Location selected
  </ng-template>
  <ng-template #card>
    <app-card>
      <app-card-header>
        Current weather in :
        {{ selectedLocationCardTab() && selectedLocationCardTab().data.name }}
      </app-card-header>
      <app-card-main *ngIf="selectedLocationCardTab()">
        <!-- {{ selectedLocationCardTab() | json }} -->
        <div>
          <h4>
            Current conditions:
            {{
              selectedLocationCardTab() &&
                selectedLocationCardTab().data.weather[0].main
            }}
          </h4>
          <h4>Temperatures today:</h4>
          <p>
            Current
            {{ selectedLocationCardTab().data.main.temp | number : ".0-0" }} -
            Max
            {{ selectedLocationCardTab().data.main.temp_max | number : ".0-0" }}
            - Min
            {{ selectedLocationCardTab().data.main.temp_min | number : ".0-0" }}
          </p>
        </div>
        <img
          [src]="
            weatherService.getWeatherIcon(
              selectedLocationCardTab().data.weather[0].id
            )
          "
        />
      </app-card-main>
      <app-card-footer *ngIf="selectedLocationCardTab()"
        ><p>
          <a [routerLink]="['/forecast', selectedLocationCardTab().zip]"
            >Show 5-day forecast for
            {{ selectedLocationCardTab().data.name }}</a
          >
        </p>
      </app-card-footer>
    </app-card>
  </ng-template>
</div>
